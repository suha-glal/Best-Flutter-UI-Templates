"use strict";var _monoAnchor={anchors:$("a[href*=#]:not([href^=http])"),$header:$("header"),$window:$(window),$nav:$(".module.nav"),init:function(){var t=this;this.isInTool=document.body.hasAttribute("data-istool"),this.headerSettings=this.makeOptionsObj(this.$header.attr("data-settings")),$(window).on("hashchange",function(){if(window.location.hash){var e=t.filterVisibleAnchors($('a[name="'+window.location.hash.replace(/#*/,"")+'"]'));e&&t.scrollTo(e)}}),$(this.anchors).each(function(e,n){$(n).on("click.anchor",$.proxy(t.anchorHandler,t))}),window.location.hash&&this.scrollOnLoad()},anchorHandler:function(t){var e=this,n=$(t.currentTarget),i=this.filterVisibleAnchors($(n[0].hash).length?$(n[0].hash):$('a[name="'+n[0].hash.replace(/#/g,"")+'"]'));if(i.length){t.preventDefault(),this.$nav.hasClass("opened-menu")&&this.$nav.find(".closeBtn").trigger("click");var o=setInterval(function(){$("body").hasClass("noScroll")||(clearInterval(o),e.scrollTo(i))},10)}},scrollTo:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,o=this.isInTool?$("html,body").add(this.$window[0].parent.iframeGrids.trDiv):$("html,body"),a=this.getDest(t);if(!n&&a>$(document).scrollTop()){var s=document.body.offsetHeight;$("img[data-lazyload-src]").each(function(e,n){$(n).parents(".module").on("lazyloadFinished",function(){o.stop();var e=document.body.offsetHeight-s,n=(1-$(document).scrollTop()/(a+e))*i;this.scrollTo(t,!0,n)})})}o.animate({scrollTop:a},{duration:i,easing:"swing",step:function(n,i){var o=e.getDest(t);i.end!==o&&(i.end=o)},done:function(){setTimeout(function(){$("img[data-lazyload-src]").each(function(t,e){$(e).parents(".module").off("lazyloadFinished")})},250)}}),window.location.hash=window.location.hash.replace(/#*/,"#"),window.location.hash&&window.location.hash=="#"+t.attr("name")||window.history.pushState(null,null,"#"+t.attr("name"))},scrollOnLoad:function(){var t=this,e=window.location.hash,n=this.filterVisibleAnchors($(e).length&&!$(e)[0].classList.length&&$(e).is("a")?$(e):$("a[name="+e.replace(/#/g,"")+"]"));n.length&&$(".module.gallery").filter(":animated").promise().done(function(){setTimeout(function(){t.scrollTo(n)},250)})},getDest:function(t){var e=0;return e=t.offset().top-parseInt(t.parent().css("padding-top"))>$(document).outerHeight(1)-this.$window.height()?$(document).height()-this.$window.height():t.offset().top-parseInt(t.parent().css("padding-top")),!this.isInTool&&this.$header.attr("data-req")&&-1==this.headerSettings.indexOf("headerminify-"+this.checkVP())&&this.$header.attr("data-req").indexOf("headerfixed")>-1&&(!this.headerSettings.length||this.headerSettings.indexOf("headerfixed")>-1||this.headerSettings.indexOf("headerfixed-"+this.checkVP())>-1)&&(e-=this.$header.outerHeight()),e},filterVisibleAnchors:function(t){var e=t.text("a").filter(":visible");return t.text(""),e},checkVP:function(){return $(window).width()<768?"sm":$(window).width()>768&&$(window).width()<1199?"md":"lg"},makeOptionsObj:function(t){return t?t.split(","):[]}};_monoAnchor.init();